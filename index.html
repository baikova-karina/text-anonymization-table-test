<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sortable and Filterable Table Example</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }
    th {
      background: #f4f4f4;
      cursor: pointer;
      user-select: none;
    }
    th.sorted-asc::after { content: " ▲"; }
    th.sorted-desc::after { content: " ▼"; }
    tr.hide { display: none; }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 16px;
      margin-bottom: 8px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

<h2>Study Results Table</h2>
<input type="text" id="filterInput" placeholder="Type to filter table..." onkeyup="filterTable()">

<table id="resultsTable">
  <thead>
    <tr>
      <th onclick="sortTable(0)">Study</th>
      <th onclick="sortTable(1)">Method</th>
      <th onclick="sortTable(2)">Language</th>
      <th onclick="sortTable(3)">Training Corpora</th>
      <th onclick="sortTable(4)">Test Set</th>
      <th onclick="sortTable(5)">F1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
  <td>Ribeiro et al. (2023)</td>
  <td>CRF</td>
  <td>English</td>
  <td>ib2b 2006, ib2b 2014</td>
  <td>ib2b 2006</td>
  <td>0.948</td>
</tr>
<tr>
  <td>Ribeiro et al. (2023)</td>
  <td>CRF</td>
  <td>English</td>
  <td>ib2b 2006, ib2b 2014</td>
  <td>ib2b 2014</td>
  <td>0.878</td>
</tr>
<tr>
  <td>Ribeiro et al. (2023)</td>
  <td>CRF</td>
  <td>English</td>
  <td>ib2b 2006, ib2b 2014</td>
  <td>MIMIC III</td>
  <td>0.691</td>
</tr>
<tr>
  <td>Ribeiro et al. (2023)</td>
  <td>Presidio</td>
  <td>English</td>
  <td>OntoNotes 5 dataset</td>
  <td>ib2b 2006</td>
  <td>0.730</td>
</tr>
<tr>
  <td>Ribeiro et al. (2023)</td>
  <td>Presidio</td>
  <td>English</td>
  <td>OntoNotes 5 dataset</td>
  <td>ib2b 2014</td>
  <td>0.646</td>
</tr>
<tr>
  <td>Ribeiro et al. (2023)</td>
  <td>Presidio</td>
  <td>English</td>
  <td>OntoNotes 5 dataset</td>
  <td>MIMIC III</td>
  <td>0.666</td>
</tr>
  </tbody>
</table>

<script>
let sortState = { col: null, asc: true };

function sortTable(colIdx) {
  const table = document.getElementById("resultsTable");
  const tbody = table.tBodies[0];
  const rows = Array.from(tbody.rows);

  // Remove previous sort indicators
  Array.from(table.tHead.rows[0].cells).forEach((th, idx) => {
    th.classList.remove('sorted-asc', 'sorted-desc');
    if (idx === colIdx) {
      th.classList.add(sortState.col === colIdx && sortState.asc ? 'sorted-desc' : 'sorted-asc');
    }
  });

  // Toggle sort direction if same column, else default to ascending
  if (sortState.col === colIdx) {
    sortState.asc = !sortState.asc;
  } else {
    sortState.col = colIdx;
    sortState.asc = true;
  }

  rows.sort((a, b) => {
    let aText = a.cells[colIdx].textContent.trim();
    let bText = b.cells[colIdx].textContent.trim();

    // Try numeric comparison for F1 column
    if (colIdx === 5) {
      aText = parseFloat(aText);
      bText = parseFloat(bText);
      if (isNaN(aText)) aText = 0;
      if (isNaN(bText)) bText = 0;
    }

    if (aText < bText) return sortState.asc ? -1 : 1;
    if (aText > bText) return sortState.asc ? 1 : -1;
    return 0;
  });

  // Re-attach sorted rows
  rows.forEach(row => tbody.appendChild(row));
}

function filterTable() {
  const input = document.getElementById("filterInput");
  const filter = input.value.toLowerCase();
  const table = document.getElementById("resultsTable");
  const rows = table.tBodies[0].rows;

  for (let i = 0; i < rows.length; i++) {
    let rowText = Array.from(rows[i].cells)
      .map(td => td.textContent.toLowerCase())
      .join(" ");
    rows[i].style.display = rowText.includes(filter) ? "" : "none";
  }
}
</script>

</body>
</html>
