<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sortable and Filterable Table</title>
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
      cursor: pointer;
    }
    th.active {
      background-color: #f0f0f0;
    }
    tr.hide {
      display: none;
    }
    input[type="text"] {
      margin-bottom: 10px;
      width: 100%;
      padding: 6px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<input type="text" id="filterInput" onkeyup="filterTable()" placeholder="Search table...">

<table id="myTable">
  <thead>
    <tr>
      <th onclick="sortTable(0)">Study</th>
      <th onclick="sortTable(1)">Method</th>
      <th onclick="sortTable(2)">Language</th>
      <th onclick="sortTable(3)">Training Data</th>
      <th onclick="sortTable(4)">Test Data</th>
      <th onclick="sortTable(5)">F1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Smith et al. 2021</td>
      <td>BERT</td>
      <td>English</td>
      <td>WikiText</td>
      <td>GLUE</td>
      <td>88.5</td>
    </tr>
    <tr>
      <td>Lee et al. 2022</td>
      <td>RoBERTa</td>
      <td>Korean</td>
      <td>Korean News</td>
      <td>KLUE</td>
      <td>85.2</td>
    </tr>
    <tr>
      <td>Garcia et al. 2020</td>
      <td>LSTM</td>
      <td>Spanish</td>
      <td>Wikipedia</td>
      <td>CoNLL</td>
      <td>78.3</td>
    </tr>
    <!-- Add more rows as needed -->
  </tbody>
</table>

<script>
let sortDirection = Array(6).fill(true); // true = ascending, false = descending

function sortTable(colIdx) {
  const table = document.getElementById("resultsTable");
  const tbody = table.tBodies[0];
  const rows = Array.from(tbody.rows);

  // Remove previous sort indicators
  Array.from(table.tHead.rows[0].cells).forEach((th, idx) => {
    th.classList.remove('sorted-asc', 'sorted-desc');
    if (idx === colIdx) {
      th.classList.add(sortState.col === colIdx && sortState.asc ? 'sorted-desc' : 'sorted-asc');
    }
  });

  // Toggle sort direction if same column, else default to ascending
  if (sortState.col === colIdx) {
    sortState.asc = !sortState.asc;
  } else {
    sortState.col = colIdx;
    sortState.asc = true;
  }

  rows.sort((a, b) => {
    let aText = a.cells[colIdx].textContent.trim();
    let bText = b.cells[colIdx].textContent.trim();

    // Try numeric comparison for F1 column
    if (colIdx === 5) {
      aText = parseFloat(aText);
      bText = parseFloat(bText);
      if (isNaN(aText)) aText = 0;
      if (isNaN(bText)) bText = 0;
    }

    if (aText < bText) return sortState.asc ? -1 : 1;
    if (aText > bText) return sortState.asc ? 1 : -1;
    return 0;
  });

  // Re-attach sorted rows
  rows.forEach(row => tbody.appendChild(row));
}

function filterTable() {
  const input = document.getElementById("filterInput");
  const filter = input.value.toLowerCase();
  const table = document.getElementById("myTable");
  const trs = table.getElementsByTagName("tr");
  for (let i = 1; i < trs.length; i++) {
    const tds = trs[i].getElementsByTagName("td");
    let rowContainsFilter = false;
    for (let j = 0; j < tds.length; j++) {
      if (tds[j].textContent.toLowerCase().indexOf(filter) > -1) {
        rowContainsFilter = true;
        break;
      }
    }
    trs[i].style.display = rowContainsFilter ? "" : "none";
  }
}
</script>

</body>
</html>
